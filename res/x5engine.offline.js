(function(e,t){"use strict";function n(e){if(e("category"))return r("posts_cat",e("category"));if(e("author"))return r("posts_author",e("author"));if(e("tag")){var n=[],s=t.settings.imBlog.posts_ids;if(s)for(var o=0;o<s.length;o++)i(t.settings.imBlog.posts[s[o]],e("tag"))&&n.push(s[o]);return n}if(e("month"))return r("posts_month",e("month"));if(e("search")){var n=[],s=t.settings.imBlog.posts_ids;if(s){var u=e("search");for(o=0;o<s.length;o++){var a=t.settings.imBlog.posts[s[o]];(a.title.indexOf(u)!=-1||a.summary.indexOf(u)!=-1||a.body.indexOf(u)!=-1)&&n.push(a.id)}}return n}return t.settings.imBlog.posts_ids}function r(e,n){if(n=="|All|")return t.settings.imBlog.posts_ids;for(var r in t.settings.imBlog[e])if(r.replace(/[\s]{1}/g,"_")===n.replace(/[\s]{1}/g,"_"))return t.settings.imBlog[e][r]||[];return[]}function i(e,t){for(var n=0;n<e.tag.length;n++)if(e.tag[n]==t)return!0;return!1}e.extend(t,{imBlog:{separator:'<div class="imBlogSeparator"></div>\n',paginate:function(e,n,r,i){var s='<div class="imBlogPagination">',o=t.l10n.get,u=Math.ceil(i/r),a=n/r+1;if(u<2)return"";n>0&&(s+='<a href="'+e+"start="+(n-r)+"&length="+r+'">'+o("blog_pagination_prev","&lt;&lt; Newer posts")+"</a>");var f=!1,l=!1;for(var c=1;c<=u;c++)u<7||c==1||c==u||c>=a-1&&c<=a+1?s+="<a "+(c==a?'class="imBlogPaginationCurrent" ':"")+'href="'+e+"start="+r*(c-1)+"&length="+r+'">'+c+"</a>":c<a-1&&!f?(s+="<span>...</span>",f=!0):c>a+1&&!l&&(s+="<span>...</span>",l=!0);return i>n+r&&(s+='<a href="'+e+"start="+(n+r)+"&length="+r+'">'+o("blog_pagination_next","Older posts &gt;&gt;")+"</a>"),s+="</div>",s},showPost:function(n,r){r=r||0;var i="",s=t.l10n.get,o=t.imBlog.isBlogSection(),u=t.settings.imBlog,a=u.posts[n];if(!a)return;if(r!==0){var f=a.timestamp.split("/");f[1]=s("date_full_months")[f[1]-1],f=f.join(" ");var l=a.cover!==""?'<div id="imBlogPostCover_'+n+'" class="imBlogPostCover"></div>':"";u.article_type=="covertitlecontents"&&(i+=l),i+="<header><"+a.title_heading_tag+' id="imPgTitle" style="display: block;">'+a.title+"</"+a.title_heading_tag+"></header>",i+='<div class="imBreadcrumb" style="display: block;">';if(a.author!=""||a.category!="")i+=s("blog_published")+" ",a.author!=""&&(i+=s("blog_by")+' <a href="?author='+a.author.replace(/[\s]{1}/g,"_")+'"><strong> '+a.author+" </strong></a> "),a.category!=""&&(i+=s("blog_in")+' <a href="?category='+a.category.replace(/[\s]{1}/g,"_")+'">'+a.category+"</a> "),i+="&middot; ";i+=f;if(a.tag.length>0){i+="<br />Tags: ";var c=[];for(var h=0;h<a.tag.length;h++)c.push('<a href="?tag='+a.tag[h]+'">'+a.tag[h]+"</a>");i+=c.join(",&nbsp;")}i+="</div>",u.article_type=="titlecovercontents"&&(i+=l),i+='<div class="imBlogPostBody">',i+=a.body;if("media"in a||"slideshow"in a)i+='<div class="imBlogMedia">',"media"in a&&!!a.mediahtml&&(i+=a.mediahtml),"slideshow"in a&&!!a.slideshow&&(i+=a.slideshow),i+="</div>";if(a.sources.length>0){i+='<div class="imBlogSources">',i+="<b>"+s("blog_sources")+":</b><br />",i+="<ul>";for(var p=0;p<a.sources.length;p++)i+="<li>"+a.sources[p]+"</li>";i+="</ul></div>"}i+=(!u.addThis||!u.addThis?"":"<br />"+u.addThis)+"<br /><br /></div>",u.comments&&(u.comments_source=="wsx5"?u.comment_type!="stars"?(i+='<div class="topic-comments">',i+='<div class="topic-summary">',i+="<div>"+s("blog_no_comment")+"</div>",i+="</div>",i+='<div class="topic-form">',i+='<form id="blogComment" action="#">',i+='<div class="topic-form-row">',i+='<label for="form_name" style="float: left; width: 100px;">'+s("blog_name")+'*</label> <input type="text" id="form_name" name="name" class="mandatory" />',i+="</div>",i+='<div class="topic-form-row">',i+='<label for="form_email" style="float: left; width: 100px;">'+s("blog_email")+'*</label> <input type="text" id="form_email" name="email" class="mandatory valEmail" />',i+="</div>",i+='<div class="topic-form-row">',i+='<label for="form_url" style="float: left; width: 100px;">'+s("blog_website")+'</label> <input type="text" id="form_url" name="url" />',i+="</div>",u.comment_type!="comment"&&(i+='<div class="topic-form-row">',i+='<label for="blog-rating" style="float: left; width: 100px;vertical-align: middle;">'+s("blog_rating")+"*</label>",i+='<span class="topic-star-container-big variable-star-rating">',i+='<span class="topic-star-fixer-big" style="width: 0;"></span>',i+="</span>",i+="</div>"),i+='<div class="topic-form-row">',i+='<label for="form_body" style="clear: both; width: 100px;">'+s("blog_message")+'*</label><textarea id="form_body" name="body" class="mandatory" style="width: 99%; height: 100px;"></textarea>',i+="</div>",u.captcha&&(i+=u.captcha),i+='<div class="topic-form-row" style="text-align: center; margin-bottom: 15px;"><input type="button" value="'+s("blog_send")+'" class="imBlogCommentSubmitBtn" onclick="x5engine.imBlog.offlineCheck()"/></div>',i+="</form>",i+="</div>",i+="</div>"):(i+='<div style="text-align: center" class="topic-comments">',i+='<div style="margin-bottom: 5px;">'+s("blog_vote","Average Vote")+": 0/5</div>",i+='<div class="topic-star-container-big variable-star-rating">',i+='<span class="topic-star-fixer-big" style="width: 0%;"></span>',i+="</div>",i+="</div>"):i+=u.comments_code),o&&e("head title").empty().append(a.title_tag)}else{i+='<article class="imBlogPostCard'+(a.cardCover!==""?" imBlogPostCardWithCover":"")+'">',a.cardCover!==""&&u.card_type!="topcontentsbottomcover"&&(i+='<div id="imBlogPostCardCover_'+n+'" class="imBlogPostCardCover" onclick="window.location=\''+a.rel_url+"';\"></div>"),u.show_card_title&&(i+='<header class="imBlogPostCardTitle"><h1><a href="'+a.rel_url+'">'+a.title+"</a></h1></header>"),u.show_card_category&&(i+='<div class="imBlogPostCardCategory"><a href="?category='+a.category.replace(/[\s]{1}/g,"_")+'">'+a.category+"</a></div>"),a.cardCover!==""&&u.card_type=="topcontentsbottomcover"&&(i+='<div id="imBlogPostCardCover_'+n+'" class="imBlogPostCardCover" onclick="window.location=\''+a.rel_url+"';\"></div>"),u.show_card_description&&(i+='<div class="imBlogPostCardDescription">'+a.summary+'<div class="imBlogPostCardDescriptionFade"></div></div>');if(u.show_card_author||u.show_card_date)i+='<div class="imBlogPostCardDetails">',i+=t.imBlog.separator,u.show_card_author&&(i+='<span class="imBlogPostCardAuthor"><a href="?author='+a.author.replace(/[\s]{1}/g,"_")+'">'+a.author+"</a></span>"),u.show_card_date&&(u.show_card_author&&a.author!=""&&(i+=" | "),i+='<span class="imBlogPostCardDate">'+a.timestamp+"</span>"),i+="</div>";u.show_card_button&&(i+='<div class="imBlogPostCardButton"><a href="'+a.rel_url+'">'+s("blog_read_all")+"</a></div>"),i+="</article>"}return i},showPosts:function(e,n,r){var i=e.length<n+r?e.length:n+r;if(n>=e.length||i<=n)return;var s=t.utils.getParam,o=s("category")==null&&s("author")==null&&s("tag")==null&&s("month")==null&&s("search")==null?!0:!1,u="";if(o&&t.settings.imBlog.highlight_mode=="card"){u+='<div class="imBlogHighlightedCards">';for(var a=n;a<Math.min(t.settings.imBlog.highlighted_count,i);a++)u+=t.imBlog.showPost(e[a],0),n+=1;u+="</div>"}else if(o&&t.settings.imBlog.highlight_mode=="slideshow"&&n==0){u+='<div class="imBlogHighlightedCards">';for(var a=0;a<Math.min(t.settings.imBlog.highlighted_count,e.length);a++)u+=t.imBlog.showPost(e[a],0);t.settings.imBlog.highlighted_count>1&&(u+='<div class="imBlogHighlightedBefore">&laquo;</div>',u+='<div class="imBlogHighlightedAfter">&raquo;</div>',u+="<script>x5engine.boot.push(function () { x5engine.blogHighlightedSlideshow.start(); });</script>"),u+="</div>"}for(var a=n;a<i;a++)u+=t.imBlog.showPost(e[a],0);return u},offlineCheck:function(){t.imForm.validate("#blogComment",{type:"tip",showAll:!0})&&t.utils.showOfflineMessage(t.l10n.get("blog_offline_message"))},showCategory:function(e){var n="",r=t.settings.imBlog.posts_cat,i=t.utils.getParam("start"),s=t.utils.getParam("length"),o=[];for(var u in r)e=="|All|"?o=o.concat(r[u]):u.replace(/[\s]{1}/g,"_")===e.replace(/[\s]{1}/g,"_")&&(o=r[u]);i=i?Math.max(i,0):0,s=s?Math.max(s,1):t.settings.imBlog.home_posts_number;if(!o)return;return o.length?(n+=t.imBlog.showPosts(o,i,s),n+=t.imBlog.paginate("?category="+e.replace(/[\s]{1}/g,"_")+"&",i,s,o.length)):n+='<div class="imBlogEmpty">Empty category</div>',n},showAuthor:function(e){var n="",r=t.settings.imBlog.posts_author,i=t.utils.getParam("start"),s=t.utils.getParam("length"),o=[];for(var u in r)e=="|All|"?o=o.concat(r[u]):u.replace(/[\s]{1}/g,"_")===e.replace(/[\s]{1}/g,"_")&&(o=r[u]);i=i?Math.max(i,0):0,s=s?Math.max(s,1):t.settings.imBlog.home_posts_number;if(!o)return;return o.length?(n+=t.imBlog.showPosts(o,i,s),n+=t.imBlog.paginate("?author="+e.replace(/[\s]{1}/g,"_")+"&",i,s,o.length)):n+='<div class="imBlogEmpty">No author\'s posts</div>',n},showMonth:function(e){var n="",r=t.settings.imBlog.posts_month[e],i=t.utils.getParam("start"),s=t.utils.getParam("length");i=i?Math.max(i,0):0,s=s?Math.max(s,1):t.settings.imBlog.home_posts_number;if(!r)return;return r.length?(n+=t.imBlog.showPosts(r,i,s),n+=t.imBlog.paginate("?month="+e+"&",i,s,r.length)):n+='<div class="imBlogEmpty">Empty month</div>',n},showSearch:function(e){var n="",r=t.settings.imBlog.posts_ids,i=0,s=t.utils.getParam("start"),o=t.utils.getParam("length"),u=[],a=0;s=s?Math.max(s,0):0,o=o?Math.max(o,1):t.settings.imBlog.home_posts_number;if(!r)return;if(!r.length)n+='<div class="imBlogEmpty">Empty blog</div>';else{for(a=0;a<r.length;a++){var f=t.settings.imBlog.posts[r[a]];(f.title.indexOf(e)!=-1||f.summary.indexOf(e)!=-1||f.body.indexOf(e)!=-1)&&u.push(f.id)}n+=t.imBlog.showPosts(u,s,o),n+=t.imBlog.paginate("?search="+e+"&",s,o,u.length),u.length===0&&(n+='<div class="imBlogEmpty">Empty search</div>')}return n},showLast:function(e){var n=t.settings.imBlog.posts_ids,r="",i=t.utils.getParam("start"),s=t.utils.getParam("length");i=i?Math.max(i,0):0,s=s?Math.max(s,1):e;if(!n)return;return n.length?(r+=t.imBlog.showPosts(n,i,s),r+=t.imBlog.paginate("?",i,s,n.length)):r+='<div class="imBlogEmpty">Empty blog</div>',r},showTag:function(e){var n=t.settings.imBlog.posts_ids,r="",i=[],s=t.utils.getParam("start"),o=t.utils.getParam("length");s=s?Math.max(s,0):0,o=o?Math.max(o,1):t.settings.imBlog.home_posts_number;if(!n)return;if(!n.length)r+='<div class="imBlogEmpty">Empty blog</div>';else{for(var u=0;u<n.length;u++){var a=t.settings.imBlog.posts[n[u]].tag,f=!1;for(var l=0;l<a.length;l++)a[l]==e&&i.push(n[u])}r+=t.imBlog.showPosts(i,s,o)}return r},show:function(){var n=t.imBlog,r=t.utils.getParam,i=t.settings.imBlog.posts_slug,s=e("#imBlogContent"),o=t.imBlog.isBlogSection();if(!t.utils.isOnline()){s.empty();var u=location.search.replace(/^[\?]+/gi,"");!i[u]&&!r("id")?(e("#imBlogPage").removeClass("imBlogArticle").addClass("imBlogHome"),r("category")?s.append(n.showCategory(r("category"))):r("author")?s.append(n.showAuthor(r("author"))):r("tag")?s.append(n.showTag(r("tag"))):r("month")?s.append(n.showMonth(r("month"))):r("search")?s.append(n.showSearch(r("search"))):s.append(n.showLast(t.settings.imBlog.home_posts_number)),o&&e("head title").empty().append(t.settings.imBlog.title_tag)):(e("#imBlogPage").removeClass("imBlogHome").addClass("imBlogArticle"),s.replaceWith('<article id="imBlogContent"></article>'),s=e("#imBlogContent"),i[u]?s.append(n.showPost(i[u],1)):s.append(n.showPost(r("id"),1))),t.topic({target:".topic-comments"})}},getPostIdsFromParams:function(){var e=t.utils.getParam,r=location.search.replace(/^[\?]+/gi,"");if(t.settings.imBlog.posts_slug[r])return[t.settings.imBlog.posts_slug[r]];if(e("id"))return[e("id")];var i=n(e),s=Math.max(e("start")||0,0),o=Math.max(e("length")||t.settings.imBlog.home_posts_number,1);return i.slice(Math.min(s,i.length),Math.min(s+o,i.length))},isBlogSection:function(){return window.location.pathname.substring(0,5)=="/blog"}}})})(_jq,x5engine),function(e,t){"use strict";e.extend(t,{offlineNotify:{NOTIFICATION_CLASS_NAME:"im-offline-notification",CONTAINER_ID_NAME:"imNotificationContainer",notificationCount:0,notify:function(n){var r='<svg class="notificationClose" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"/></svg>';n=e.extend(!0,{message:t.l10n.get("blog_offline_message"),level:"attention",notificationWidth:300,notificationTimeRemove:5e3,notificationDelay:500,marginBetweenNotification:10,category:null,color:null,elementClose:r},n);var i={message:n.message,level:n.level};t.offlineNotify.notificationCount++,e("#"+t.offlineNotify.CONTAINER_ID_NAME).length>0?n.category!==null?e("#"+t.offlineNotify.CONTAINER_ID_NAME).find("[data-category='"+n.category+"']").length>0?t.offlineNotify.notificationCount--:t.offlineNotify.showNotificationTimeout(n,i):t.offlineNotify.showNotificationTimeout(n,i):(t.offlineNotify.createContainer(),t.offlineNotify.showNotification(n,i))},createContainer:function(){e("<div id='"+t.offlineNotify.CONTAINER_ID_NAME+"' />").appendTo("body")},showNotificationTimeout:function(e,n){var r=this;r.newNotification=n;var i=e.notificationDelay;if(i>0)var s=setTimeout(function(){t.offlineNotify.showNotification(e,r.newNotification)},t.offlineNotify.notificationCount*i);else t.offlineNotify.showNotification(e,r.newNotification)},showNotification:function(n,r){var i=e("<div class='offline-notification-wrapper'/>"),s=e("<div class=' "+t.offlineNotify.NOTIFICATION_CLASS_NAME+" "+r.level+"'/>").css({marginLeft:n.notificationWidth+10+"px",marginTop:n.marginBetweenNotification+"px"}).append("<p>"+r.message+"</p>").appendTo("body");n.color!==null&&e(s).css("background-color",n.color),n.category!==null&&e(s).attr("data-category",n.category);var o=e("<div class='close-notification'>"+n.elementClose+"</div>").click(function(){t.offlineNotify.close(s)}).appendTo(s);s.appendTo(i),e("#"+t.offlineNotify.CONTAINER_ID_NAME).prepend(i),setTimeout(function(){t.offlineNotify.removeNotification(s)},n.notificationTimeRemove)},close:function(e){t.offlineNotify.removeNotification(e)},removeNotification:function(n){e(n).addClass("im-notification-fade-out"),setTimeout(function(){e(n).parent().remove(),t.offlineNotify.notificationCount--,t.offlineNotify.notificationCount<1&&(e("#"+t.offlineNotify.CONTAINER_ID_NAME).remove(),t.offlineNotify.notificationCount=0)},500)}}})}(_jq,x5engine),function(e,t){"use strict";e.extend(!0,t,{responsive:{showOrderingPositions:function(n){var r=e("body"),i=e(window);n=e.extend(!0,{onObjectClick:null},n),e("[data-responsive-sequence-number]:visible").each(function(){var s=e(this),o=s.attr("data-responsive-sequence-number"),u=null,a=null,f=e('<div class="responsive-sequence-box"><div class="sequence-box-background"></div><div class="sequence-number-background"></div><div class="sequence-number">'+o+"</div>"+"</div>"),l=function(){u=t.utils.offset(s),f.css({top:u.top,left:u.left,"z-index":t.settings.zIndex.sequenceNumbers}).outerWidth(s.innerWidth()).outerHeight(s.innerHeight())};e.isFunction(n.onObjectClick)&&f.click(n.onObjectClick),r.append(f),l(),i.on("resize.sequence-number",function(){clearTimeout(a),a=setTimeout(l,10)})})},hideOrderingPositions:function(){e(".responsive-sequence-box").remove(),e(window).off(".sequence-number")}}})}(_jq,x5engine),function(e,t){"use strict";e.extend(t.utils,{offlineMessageTimeout:null,showOfflineMessage:function(n,r,i,s,o,u){if(t.utils.isOnline())return!1;var a={};try{a=JSON.parse(n),a=e.extend({message:"",level:"attention",color:null,category:escape(n),notificationDelay:500},a)}catch(f){a.message=n,s!==undefined&&(a.level=s),i!==undefined&&(a.color=i),o===undefined?a.category=escape(n):a.category=escape(o),u!==undefined&&(a.notificationDelay=u)}return t.offlineNotify.notify(a),!0}})}(_jq,x5engine);